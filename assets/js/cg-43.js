(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{335:function(s,a,t){"use strict";t.r(a);var n=t(7),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"é¢ç»æ‰‹å†Œ-Â·-ç¬¬14ç¯‡ã€Švolatile-æ€ä¹ˆå®ç°çš„å†…å­˜å¯è§-æ²¡æœ‰-volatile-ä¸€å®šä¸å¯è§å—-ã€‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é¢ç»æ‰‹å†Œ-Â·-ç¬¬14ç¯‡ã€Švolatile-æ€ä¹ˆå®ç°çš„å†…å­˜å¯è§-æ²¡æœ‰-volatile-ä¸€å®šä¸å¯è§å—-ã€‹"}},[s._v("#")]),s._v(" é¢ç»æ‰‹å†Œ Â· ç¬¬14ç¯‡ã€Švolatile æ€ä¹ˆå®ç°çš„å†…å­˜å¯è§ï¼Ÿæ²¡æœ‰ volatile ä¸€å®šä¸å¯è§å—ï¼Ÿã€‹")]),s._v(" "),a("p",[s._v("ä½œè€…ï¼šå°å‚…å“¥\n"),a("br"),s._v("åšå®¢ï¼š"),a("a",{attrs:{href:"https://bugstack.cn",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://bugstack.cn"),a("OutboundLink")],1)]),s._v(" "),a("blockquote",[a("p",[s._v("æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„")])]),s._v(" "),a("h2",{attrs:{id:"ä¸€ã€ç åœºå¿ƒå¾—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€ã€ç åœºå¿ƒå¾—"}},[s._v("#")]),s._v(" ä¸€ã€ç åœºå¿ƒå¾—")]),s._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://bugstack.cn/assets/images/2020/interview/interview-14-02.png",loading:"lazy"}})]),s._v(" "),a("p",[a("code",[s._v("ä½ æ˜¯ä¸ªèƒ½åƒè‹¦çš„äººå—ï¼Ÿ")])]),s._v(" "),a("p",[s._v("ä»å‰çš„èƒ½åƒè‹¦å¤§å¤šæŒ‡çš„ä½“åŠ›åŠ³åŠ¨çš„è‹¦ï¼Œä½†ç°åœ¨çš„èƒ½åƒè‹¦å·²ç»åŒ…æ‹¬å¤ªå¤šç»´åº¦ï¼ŒåŒ…æ‹¬ï¼š"),a("code",[s._v("è¯»ä¹¦å­¦ä¹ &å¯‚å¯çš„è‹¦")]),s._v("ã€"),a("code",[s._v("æ·±åº¦æ€è€ƒ&è„‘åŠ›çš„è‹¦")]),s._v("ã€"),a("code",[s._v("è‡ªå¾‹ä¹ æƒ¯&ä¿®è¡Œçš„è‹¦")]),s._v("ã€"),a("code",[s._v("è‡ªæ§èƒ½åŠ›&æ”¾å¼ƒçš„è‹¦")]),s._v("ã€"),a("code",[s._v("ä½å¤´åšäºº&å°Šä¸¥çš„è‹¦")]),s._v("ã€‚")]),s._v(" "),a("p",[s._v("è™½ç„¶è¿™äº›è‹¦æ‘†åœ¨çœ¼å‰ï¼Œä½†å¤§å¤šæ•°äººè¿˜æ˜¯å–œæ¬¢åƒç®€å•çš„è‹¦ã€‚ç†¬å¤œåŠ ç­ã€æ—¥å¤ä¸€æ—¥ã€é‡å¤æ˜¨å¤©ã€CRUDï¼Œæœ€åèº«ä½“å‘èƒ–ã€ä½“è´¨ä¸‹é™ã€èƒ½åŠ›ä¸è¶³ã€è‡ªæŠ±è‡ªæ³£ï¼æ‰€ä»¥æœ‰äº›è‹¦èƒ½ä¸åƒå°±ä¸åƒï¼Œè¦åƒå°±åƒé‚£äº›æœ‰æˆé•¿ä»·å€¼çš„è‹¦ã€‚")]),s._v(" "),a("p",[a("code",[s._v("ä»Šå¤©ä½ å†™åšå®¢äº†å—ï¼Ÿ")])]),s._v(" "),a("p",[s._v("å¦‚æœä¸€ä»¶å°äº‹èƒ½åšæŒ5å¹´ä»¥ä¸Šï¼Œé‚£ä½ ä¸€å®šæ˜¯å¾ˆäº†ä¸èµ·çš„äººã€‚æ˜¯çš„ï¼Œå¾ˆäº†ä¸èµ·ã€‚äººæœ€éš¾çš„å°±æ˜¯æƒ³æ¸…æ¥šäº†ä½†åšä¸åˆ°ï¼Œæˆ–è€…å¶å°”åšåˆ°é•¿æœŸåšä¸åˆ°ã€‚")]),s._v(" "),a("p",[s._v("å…¶å®å¤§å¤šæ•°èµ°åœ¨ç ”å‘è·¯ä¸Šçš„ä¼™ä¼´ä»¬ï¼Œéƒ½çŸ¥é“è‡ªå·±è¯¥åŠªåŠ›ï¼Œä½†æ˜æ˜ä¸‹å¥½äº†çš„å†³å¿ƒå°±æ˜¯åšæŒä¸äº†å¤šä¹…ã€‚å°±åƒä½ æ˜¯å¦ä¹Ÿæƒ³è¿‡è¦å†™æŠ€æœ¯åšå®¢ï¼ŒåšæŠ€æœ¯ç§¯ç´¯ã€‚ç›´åˆ°æœ‰ä¸€å¤©è¢«ç“¶é¢ˆé™åˆ¶åœ¨å›°å±€ä¸­æ‰ä¼šç€æ€¥ï¼Œä½†è¿™æ—¶å€™åœ¨æƒ³ç ´å±€å°±çœŸçš„å¾ˆéš¾äº†ï¼")]),s._v(" "),a("h2",{attrs:{id:"äºŒã€é¢è¯•é¢˜"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#äºŒã€é¢è¯•é¢˜"}},[s._v("#")]),s._v(" äºŒã€é¢è¯•é¢˜")]),s._v(" "),a("p",[a("code",[s._v("è°¢é£æœºï¼Œå°è®°")]),s._v("ï¼Œé£æœºè¶ç€å‘¨æœ«ï¼Œåƒå®Œç«é”…ã€‚åˆå»çº¦é¢è¯•å®˜å–èŒ¶äº†ï¼")]),s._v(" "),a("p",[a("strong",[s._v("è°¢é£æœº")]),s._v("ï¼šå—¨ï¼Œæˆ‘åœ¨è¿™ï¼Œè¿™è¾¹ï¼Œè¿™è¾¹ã€‚")]),s._v(" "),a("p",[a("strong",[s._v("é¢è¯•å®˜")]),s._v("ï¼šä½ æ€ä¹ˆåˆæ¥äº†ï¼Œæœ€è¿‘å­¦çš„ä¸é”™äº†ï¼Ÿ")]),s._v(" "),a("p",[a("strong",[s._v("è°¢é£æœº")]),s._v("ï¼šè¿˜æ˜¯æƒ³æ¥å¤§å‚ï¼Œåˆ«å®³ç¾ï¼Œé¢æˆ‘å§ï¼")]),s._v(" "),a("p",[a("strong",[s._v("é¢è¯•å®˜")]),s._v("ï¼šæˆ‘å¥½åƒæ˜¯ä½ è¡¥è¯¾è€å¸ˆ... æ—¢ç„¶æ¥äº†ï¼Œå°±é—®é—®ä½ å§ï¼volatile æ˜¯å¹²å•¥çš„ï¼Ÿ")]),s._v(" "),a("p",[a("strong",[s._v("è°¢é£æœº")]),s._v("ï¼šå•Šï¼Œvolatile æ˜¯ä¿è¯å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹çš„å¯è§æ€§çš„ã€‚")]),s._v(" "),a("p",[a("strong",[s._v("é¢è¯•å®˜")]),s._v("ï¼šé‚£ volatile å¯ä»¥è§£å†³åŸå­æ€§é—®é¢˜å—ï¼Ÿ")]),s._v(" "),a("p",[a("strong",[s._v("è°¢é£æœº")]),s._v("ï¼šä¸å¯ä»¥ï¼")]),s._v(" "),a("p",[a("strong",[s._v("é¢è¯•å®˜")]),s._v("ï¼šé‚£ volatile çš„åº•å±‚åŸç†æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ")]),s._v(" "),a("p",[a("strong",[s._v("è°¢é£æœº")]),s._v("ï¼š...ï¼Œè¿™ï¼"),a("em",[s._v("é¢è¯•å®˜ï¼Œåˆšé—®ä¸¤ä¸ªé¢˜å°±ç”©é›·")]),s._v("ï¼Œä½ æ˜¯ä¸å®¶é‡Œæœ‰äº‹è¦å¿™ï¼Ÿ")]),s._v(" "),a("p",[a("strong",[s._v("é¢è¯•å®˜")]),s._v("ï¼šä½ ç®¡æˆ‘ï¼")]),s._v(" "),a("h2",{attrs:{id:"ä¸‰ã€volatile-è®²è§£"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸‰ã€volatile-è®²è§£"}},[s._v("#")]),s._v(" ä¸‰ã€volatile è®²è§£")]),s._v(" "),a("h3",{attrs:{id:"_1-å¯è§æ€§æ¡ˆä¾‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-å¯è§æ€§æ¡ˆä¾‹"}},[s._v("#")]),s._v(" 1. å¯è§æ€§æ¡ˆä¾‹")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ApiTest")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("VT")]),s._v(" vt "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("VT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread01")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("vt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread02")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Runnable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("catch")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("InterruptedException")]),s._v(" ignore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                vt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sign "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vt.sign = true é€šçŸ¥ while (!sign) ç»“æŸï¼"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread01")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread02")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("VT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Runnable")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" sign "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("sign"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ä½ å"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br")])]),a("p",[a("strong",[s._v("è¿™æ®µä»£ç ")]),s._v("ï¼Œæ˜¯ä¸¤ä¸ªçº¿ç¨‹æ“ä½œä¸€ä¸ªå˜é‡ï¼Œç¨‹åºæœŸæœ›å½“ "),a("code",[s._v("sign")]),s._v(" åœ¨çº¿ç¨‹ Thread01 è¢«æ“ä½œ "),a("code",[s._v("vt.sign = true")]),s._v(" æ—¶ï¼ŒThread02 è¾“å‡º "),a("em",[s._v("ä½ å")]),s._v("ã€‚")]),s._v(" "),a("p",[s._v("ä½†å®é™…ä¸Šè¿™æ®µä»£ç æ°¸è¿œä¸ä¼šè¾“å‡º "),a("em",[s._v("ä½ å")]),s._v("ï¼Œè€Œæ˜¯ä¸€ç›´å¤„äºæ­»å¾ªç¯ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæ¥ä¸‹æ¥æˆ‘ä»¬å°±ä¸€æ­¥æ­¥è®²è§£å’ŒéªŒè¯ã€‚")]),s._v(" "),a("h3",{attrs:{id:"_2-åŠ ä¸Švolatileå…³é”®å­—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-åŠ ä¸Švolatileå…³é”®å­—"}},[s._v("#")]),s._v(" 2. åŠ ä¸Švolatileå…³é”®å­—")]),s._v(" "),a("p",[s._v("æˆ‘ä»¬æŠŠ sign å…³é”®å­—åŠ ä¸Š volatitle æè¿°ï¼Œå¦‚ä¸‹ï¼š")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("VT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Runnable")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("volatile")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" sign "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("sign"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ä½ å"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[a("strong",[s._v("æµ‹è¯•ç»“æœ")])]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("vt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sign "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v(" é€šçŸ¥ "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("sign"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ç»“æŸï¼\nä½ å\n\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Process")]),s._v(" finished "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("exit")]),s._v(" code "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("volatileå…³é”®å­—æ˜¯Javaè™šæ‹Ÿæœºæä¾›çš„çš„æœ€è½»é‡çº§çš„åŒæ­¥æœºåˆ¶ï¼Œå®ƒä½œä¸ºä¸€ä¸ªä¿®é¥°ç¬¦å‡ºç°ï¼Œç”¨æ¥ä¿®é¥°å˜é‡ï¼Œä½†æ˜¯è¿™é‡Œä¸åŒ…æ‹¬å±€éƒ¨å˜é‡å“¦")]),s._v(" "),a("p",[s._v("åœ¨æ·»åŠ  volatile å…³é”®å­—åï¼Œç¨‹åºå°±ç¬¦åˆé¢„æœŸçš„è¾“å‡ºäº† "),a("em",[s._v("ä½ å")]),s._v("ã€‚ä»æˆ‘ä»¬å¯¹ volatile çš„å­¦ä¹ è®¤çŸ¥å¯ä»¥çŸ¥é“ã€‚volatileå…³é”®å­—æ˜¯ JVM æä¾›çš„æœ€è½»é‡çº§çš„åŒæ­¥æœºåˆ¶ï¼Œç”¨æ¥ä¿®é¥°å˜é‡ï¼Œç”¨æ¥ä¿è¯å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹å¯è§æ€§ã€‚")]),s._v(" "),a("p",[s._v("æ­£åœ¨ä¿®é¥°åå¯ä»¥è®©å­—æ®µåœ¨çº¿ç¨‹è§å¯è§ï¼Œé‚£ä¹ˆè¿™ä¸ªå±æ€§è¢«ä¿®æ”¹å€¼åï¼Œå¯ä»¥åŠæ—¶çš„åœ¨å¦å¤–çš„çº¿ç¨‹ä¸­åšå‡ºç›¸åº”çš„ååº”ã€‚")]),s._v(" "),a("h3",{attrs:{id:"_3-volatileæ€ä¹ˆä¿è¯çš„å¯è§æ€§"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-volatileæ€ä¹ˆä¿è¯çš„å¯è§æ€§"}},[s._v("#")]),s._v(" 3. volatileæ€ä¹ˆä¿è¯çš„å¯è§æ€§")]),s._v(" "),a("h4",{attrs:{id:"_3-1-æ— volatileæ—¶-å†…å­˜å˜åŒ–"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-æ— volatileæ—¶-å†…å­˜å˜åŒ–"}},[s._v("#")]),s._v(" 3.1 æ— volatileæ—¶ï¼Œå†…å­˜å˜åŒ–")]),s._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"æ— volatileæ—¶ï¼Œå†…å­˜å˜åŒ–","data-src":"https://bugstack.cn/assets/images/2020/interview/interview-14-03.png",loading:"lazy"}})]),s._v(" "),a("p",[s._v("é¦–å…ˆæ˜¯å½“ sign æ²¡æœ‰ volatitle ä¿®é¥°æ—¶ "),a("code",[s._v("public boolean sign = false;")]),s._v("ï¼Œçº¿ç¨‹01å¯¹å˜é‡è¿›è¡Œæ“ä½œï¼Œçº¿ç¨‹02å¹¶ä¸ä¼šæ‹¿åˆ°å˜åŒ–çš„å€¼ã€‚æ‰€ä»¥ç¨‹åºä¹Ÿå°±ä¸ä¼šè¾“å‡ºç»“æœ â€œä½ åâ€")]),s._v(" "),a("h4",{attrs:{id:"_3-2-æœ‰volatileæ—¶-å†…å­˜å˜åŒ–"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-æœ‰volatileæ—¶-å†…å­˜å˜åŒ–"}},[s._v("#")]),s._v(" 3.2 æœ‰volatileæ—¶ï¼Œå†…å­˜å˜åŒ–")]),s._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"æœ‰volatileæ—¶ï¼Œå†…å­˜å˜åŒ–","data-src":"https://bugstack.cn/assets/images/2020/interview/interview-14-04.png",loading:"lazy"}})]),s._v(" "),a("p",[s._v("å½“æˆ‘ä»¬æŠŠå˜é‡ä½¿ç”¨ volatile ä¿®é¥°æ—¶ "),a("code",[s._v("public volatile boolean sign = false;")]),s._v("ï¼Œçº¿ç¨‹01å¯¹å˜é‡è¿›è¡Œæ“ä½œæ—¶ï¼Œä¼šæŠŠå˜é‡å˜åŒ–çš„å€¼å¼ºåˆ¶åˆ·æ–°çš„åˆ°ä¸»å†…å­˜ã€‚å½“çº¿ç¨‹02è·å–å€¼æ—¶ï¼Œä¼šæŠŠè‡ªå·±çš„å†…å­˜é‡Œçš„ sign å€¼è¿‡æœŸæ‰ï¼Œä¹‹åä»ä¸»å†…å­˜ä¸­è¯»å–ã€‚æ‰€ä»¥æ·»åŠ å…³é”®å­—åç¨‹åºå¦‚é¢„æœŸè¾“å‡ºç»“æœã€‚")]),s._v(" "),a("h3",{attrs:{id:"_4-åç¼–è¯‘è§£æ¯’å¯è§æ€§"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-åç¼–è¯‘è§£æ¯’å¯è§æ€§"}},[s._v("#")]),s._v(" 4. åç¼–è¯‘è§£æ¯’å¯è§æ€§")]),s._v(" "),a("p",[s._v("ç±»ä¼¼è¿™æ ·æœ‰æ·±åº¦çš„æŠ€æœ¯çŸ¥è¯†ï¼Œæœ€ä½³çš„æ–¹å¼å°±æ˜¯æ·±å…¥ç†è§£åŸç†ï¼Œçœ‹çœ‹å®ƒåˆ°åº•åšäº†ä»€ä¹ˆæ‰ä¿è¯çš„å†…å­˜å¯è§æ€§æ“ä½œã€‚")]),s._v(" "),a("h4",{attrs:{id:"_4-1-æŸ¥çœ‹jvmæŒ‡ä»¤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-æŸ¥çœ‹jvmæŒ‡ä»¤"}},[s._v("#")]),s._v(" 4.1 æŸ¥çœ‹JVMæŒ‡ä»¤")]),s._v(" "),a("p",[a("strong",[s._v("æŒ‡ä»¤")]),s._v("ï¼š"),a("code",[s._v("javap -v -p VT")])]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("volatile")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" sign"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    descriptor"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Z")]),s._v("\n    flags"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ACC_PUBLIC")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ACC_VOLATILE")]),s._v("\n\n  org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("itstack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("interview"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("VT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    descriptor"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("V")]),s._v("\n    flags"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Code")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n      stack"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" locals"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" args_size"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" aload_0\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" invokespecial #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("                  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// Method java/lang/Object."<init>":()V')]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" aload_0\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" iconst_0\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" putfield      #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("                  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Field sign:Z")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LineNumberTable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n        line "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("35")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n        line "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("37")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LocalVariableTable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Start")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Length")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Slot")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Name")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Signature")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Lorg")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("itstack"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("interview"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("test"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("VT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    descriptor"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("V")]),s._v("\n    flags"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ACC_PUBLIC")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Code")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n      stack"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" locals"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" args_size"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" aload_0\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" getfield      #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("                  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Field sign:Z")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" ifne          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("goto")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" getstatic     #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("                  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Field java/lang/System.out:Ljava/io/PrintStream;")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" ldc           #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("                  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// String ä½ å")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" invokevirtual #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("                  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Method java/io/PrintStream.println:(Ljava/lang/String;)V")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LineNumberTable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n        line "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("40")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n        line "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n        line "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("43")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LocalVariableTable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Start")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Length")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Slot")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Name")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Signature")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Lorg")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("itstack"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("interview"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("test"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("VT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("StackMapTable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" number_of_entries "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n        frame_type "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* same */")]),s._v("\n        frame_type "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* same */")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br")])]),a("p",[s._v("ä»JVMæŒ‡ä»¤ç ä¸­åªä¼šå‘ç°å¤šäº†ï¼Œ"),a("code",[s._v("ACC_VOLATILE")]),s._v("ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆå…¶ä»–çš„ç‚¹ã€‚æ‰€ä»¥ï¼Œä¹Ÿä¸èƒ½çœ‹å‡ºæ˜¯æ€ä¹ˆå®ç°çš„å¯è§æ€§ã€‚")]),s._v(" "),a("h4",{attrs:{id:"_4-2-æŸ¥çœ‹æ±‡ç¼–æŒ‡ä»¤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-æŸ¥çœ‹æ±‡ç¼–æŒ‡ä»¤"}},[s._v("#")]),s._v(" 4.2 æŸ¥çœ‹æ±‡ç¼–æŒ‡ä»¤")]),s._v(" "),a("p",[s._v("é€šè¿‡Classæ–‡ä»¶æŸ¥çœ‹æ±‡ç¼–ï¼Œéœ€è¦ä¸‹è½½ hsdis-amd64.dll æ–‡ä»¶ï¼Œå¤åˆ¶åˆ° "),a("code",[s._v("JAVA_HOME\\jre\\bin\\serverç›®å½•ä¸‹")]),s._v("ã€‚ä¸‹è½½èµ„æºå¦‚ä¸‹ï¼š")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"http://vorboss.dl.sourceforge.net/project/fcml/fcml-1.1.1/hsdis-1.1.1-win32-amd64.zip",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://vorboss.dl.sourceforge.net/project/fcml/fcml-1.1.1/hsdis-1.1.1-win32-amd64.zip"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"http://vorboss.dl.sourceforge.net/project/fcml/fcml-1.1.1/hsdis-1.1.1-win32-i386.zip",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://vorboss.dl.sourceforge.net/project/fcml/fcml-1.1.1/hsdis-1.1.1-win32-i386.zip"),a("OutboundLink")],1)])]),s._v(" "),a("p",[s._v("å¦å¤–æ˜¯æ‰§è¡Œå‘½ä»¤ï¼ŒåŒ…æ‹¬ï¼š")]),s._v(" "),a("ol",[a("li",[s._v("åŸºç¡€æŒ‡ä»¤ï¼š"),a("code",[s._v("java -Xcomp -XX:+UnlockDiagnosticVMOptions -XX:+PrintAssembly")])]),s._v(" "),a("li",[s._v("æŒ‡å®šæ‰“å°ï¼š"),a("code",[s._v("-XX:CompileCommand=dontinline,ç±»å.æ–¹æ³•å")])]),s._v(" "),a("li",[s._v("æŒ‡å®šæ‰“å°ï¼š"),a("code",[s._v("-XX:CompileCommand=compileonly,ç±»å.æ–¹æ³•å")])]),s._v(" "),a("li",[s._v("è¾“å‡ºä½ç½®ï¼š"),a("code",[s._v("> xxx")])])]),s._v(" "),a("p",[s._v("æœ€ç»ˆä½¿ç”¨ï¼š"),a("code",[s._v("java -Xcomp -XX:+UnlockDiagnosticVMOptions -XX:+PrintAssembly -XX:CompileCommand=dontinline,ApiTest.main -XX:CompileCommand=compileonly,ApiTest.mian")])]),s._v(" "),a("p",[a("em",[s._v("æŒ‡ä»¤å¯ä»¥åœ¨IDEAä¸­çš„ Terminal é‡Œä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åˆ° DOSé»‘çª—å£ä¸­ä½¿ç”¨")])]),s._v(" "),a("p",[a("strong",[s._v("å¦å¤–")]),s._v("ï¼Œä¸ºäº†æ›´ç®€å•çš„ä½¿ç”¨ï¼Œæˆ‘ä»¬æŠŠæŒ‡ä»¤å¯ä»¥é…ç½®åˆ°ideaçš„ VM options é‡Œï¼Œå¦‚ä¸‹å›¾ï¼š")]),s._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"Idea VM options é…ç½®ç¼–è¯‘æŒ‡ä»¤","data-src":"https://bugstack.cn/assets/images/2020/interview/interview-14-05.png",loading:"lazy"}})]),s._v(" "),a("p",[s._v("é…ç½®å®Œæˆåï¼Œä¸å‡ºæ„å¤–çš„è¿è¡Œç»“æœå¦‚ä¸‹ï¼š")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Loaded")]),s._v(" disassembler from "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("C")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\\"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Program")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Files")]),s._v("\\"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Java")]),s._v("\\jdk1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.0_161")]),s._v("\\jre\\bin\\server\\hsdis"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("amd64"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dll\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Decoding")]),s._v(" compiled method "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x0000000003744990")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Code")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Argument")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" is unknown"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("RIP")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x3744ae0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Code")]),s._v(" size"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x00000110")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Disassembling")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" mach"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token char"}},[s._v("'amd64'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Entry")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Point")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Constants")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  # "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x000000001c853d18")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" 'getSnapshotTransformerList"),a("span",{pre:!0,attrs:{class:"token char"}},[s._v("' '")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Lsun")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("instrument"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TransformerManager")]),s._v("$"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TransformerInfo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token char"}},[s._v("' in '")]),s._v("sun"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("instrument"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TransformerManager")]),s._v("'\n  #           "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sp"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x40")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sp of caller"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x0000000003744ae0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" mov     r10d"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("dword ptr "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("rdx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("h"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x0000000003744ae4")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" shl     r10"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("h\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x0000000003744ae8")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" cmp     r10"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("rax\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x0000000003744aeb")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" jne     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3685f")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v("h          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("runtime_call"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x0000000003744af1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" nop     word ptr "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("rax"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("rax"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("h"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x0000000003744afc")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" nop\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Verified")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Entry")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Point")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x0000000003744b00")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" mov     dword ptr "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("rsp"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0f")]),s._v("fffffffffffa000h"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("eax\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x0000000003744b07")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" push    rbp\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x0000000003744b08")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" sub     rsp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("h           "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("aload_0\n                                                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("sun"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("instrument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),s._v("TransformerManager")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getSnapshotTransformerList")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("line "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("166")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x0000000003744b0c")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" mov     eax"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("dword ptr "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("rdx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("h"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x0000000003744b0f")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" shl     rax"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("h            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("getfield mTransformerList\n                                                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("sun"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("instrument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),s._v("TransformerManager")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getSnapshotTransformerList")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("line "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("166")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x0000000003744b13")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" add     rsp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("h\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br")])]),a("p",[a("strong",[s._v("è¿è¡Œç»“æœå°±æ˜¯æ±‡ç¼–æŒ‡ä»¤")]),s._v("ï¼Œæ¯”è¾ƒå¤šè¿™é‡Œå°±ä¸éƒ½æ”¾äº†ã€‚æˆ‘ä»¬åªè§‚å¯ŸğŸ•µé‡ç‚¹éƒ¨åˆ†ï¼š")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x0000000003324cda")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" mov    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("0x74")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("r8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("edx     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("getstatic state\n                                                 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("VT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("run")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@28")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("line "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n \n   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x0000000003324cde")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" inc    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("edx\n   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x0000000003324ce0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" mov    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("edx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("0x74")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("r8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x0000000003324ce4")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" lock addl $"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("rsp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("putstatic state\n                                                 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("VT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("run")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@33")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("line "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("ç¼–è¯‘åçš„æ±‡ç¼–æŒ‡ä»¤ä¸­ï¼Œæœ‰volatileå…³é”®å­—å’Œæ²¡æœ‰volatileå…³é”®å­—ï¼Œä¸»è¦å·®åˆ«åœ¨äºå¤šäº†ä¸€ä¸ª "),a("code",[s._v("lock addl $0x0,(%rsp)")]),s._v("ï¼Œä¹Ÿå°±æ˜¯lockçš„å‰ç¼€æŒ‡ä»¤ã€‚")]),s._v(" "),a("p",[a("strong",[s._v("lockæŒ‡ä»¤")]),s._v("ç›¸å½“äºä¸€ä¸ª"),a("em",[s._v("å†…å­˜å±éšœ")]),s._v("ï¼Œå®ƒä¿è¯å¦‚ä¸‹ä¸‰ç‚¹ï¼š")]),s._v(" "),a("ol",[a("li",[s._v("å°†æœ¬å¤„ç†å™¨çš„ç¼“å­˜å†™å…¥å†…å­˜ã€‚")]),s._v(" "),a("li",[s._v("é‡æ’åºæ—¶ä¸èƒ½æŠŠåé¢çš„æŒ‡ä»¤é‡æ’åºåˆ°å†…å­˜å±éšœä¹‹å‰çš„ä½ç½®ã€‚")]),s._v(" "),a("li",[s._v("å¦‚æœæ˜¯å†™å…¥åŠ¨ä½œä¼šå¯¼è‡´å…¶ä»–å¤„ç†å™¨ä¸­å¯¹åº”çš„å†…å­˜æ— æ•ˆã€‚")])]),s._v(" "),a("p",[s._v("é‚£ä¹ˆï¼Œè¿™é‡Œçš„1ã€3å°±æ˜¯ç”¨æ¥ä¿è¯è¢«ä¿®é¥°çš„å˜é‡ï¼Œä¿è¯å†…å­˜å¯è§æ€§ã€‚")]),s._v(" "),a("h3",{attrs:{id:"_5-ä¸åŠ volatileä¹Ÿå¯è§å—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-ä¸åŠ volatileä¹Ÿå¯è§å—"}},[s._v("#")]),s._v(" 5. ä¸åŠ volatileä¹Ÿå¯è§å—")]),s._v(" "),a("p",[a("code",[s._v("æœ‰è´¨ç–‘å°±è¦æœ‰éªŒè¯")])]),s._v(" "),a("p",[s._v("æˆ‘ä»¬ç°åœ¨å†æŠŠä¾‹å­ä¿®æ”¹ä¸‹ï¼Œåœ¨ "),a("code",[s._v("while (!sign)")]),s._v(" å¾ªç¯ä½“ä¸­æ·»åŠ ä¸€æ®µæ‰§è¡Œä»£ç ï¼Œå¦‚ä¸‹ï¼›")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("VT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Runnable")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" sign "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("sign"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ä½ å¥½"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ä½ å"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("ä¿®æ”¹åå»æ‰äº† "),a("code",[s._v("volatile")]),s._v(" å…³é”®å­—ï¼Œå¹¶åœ¨whileå¾ªç¯ä¸­æ·»åŠ ä¸€æ®µä»£ç ã€‚ç°åœ¨çš„è¿è¡Œç»“æœæ˜¯ï¼š")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\nä½ å¥½\nä½ å¥½\nä½ å¥½\nvt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sign "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v(" é€šçŸ¥ "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("sign"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ç»“æŸï¼\nä½ å\n\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Process")]),s._v(" finished "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("exit")]),s._v(" code "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[a("strong",[s._v("å’‹æ ·")]),s._v("ï¼Œåˆå¯è§äº†å§ï¼")]),s._v(" "),a("p",[s._v("è¿™æ˜¯å› ä¸ºåœ¨æ²¡ volatile ä¿®é¥°æ—¶ï¼Œjvmä¹Ÿä¼šå°½é‡ä¿è¯å¯è§æ€§ã€‚â€‹æœ‰ volatile ä¿®é¥°çš„æ—¶å€™ï¼Œä¸€å®šä¿è¯å¯è§æ€§ã€‚"),a("strong",[s._v("ä½†å¯èƒ½å¹¶éå¦‚æ­¤ï¼Œä¸‹ç« èŠ‚ç»§ç»­æ·±æŒ–ï¼")])]),s._v(" "),a("h2",{attrs:{id:"å››ã€æ€»ç»“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å››ã€æ€»ç»“"}},[s._v("#")]),s._v(" å››ã€æ€»ç»“")]),s._v(" "),a("ul",[a("li",[s._v("æœ€åæˆ‘ä»¬å†æ€»ç»“ä¸‹ volatileï¼Œå®ƒå‘¢ï¼Œä¼šæ§åˆ¶è¢«ä¿®é¥°çš„å˜é‡åœ¨å†…å­˜æ“ä½œä¸Šä¸»åŠ¨æŠŠå€¼åˆ·æ–°åˆ°ä¸»å†…å­˜ï¼ŒJMM ä¼šæŠŠè¯¥çº¿ç¨‹å¯¹åº”çš„CPUå†…å­˜è®¾ç½®è¿‡æœŸï¼Œä»ä¸»å†…å­˜ä¸­è¯»å–æœ€æ–°å€¼ã€‚")]),s._v(" "),a("li",[s._v("é‚£ä¹ˆï¼Œvolatile å¦‚ä½•é˜²æ­¢æŒ‡ä»¤é‡æ’ä¹Ÿæ˜¯å†…å­˜å±éšœï¼Œvolatile çš„å†…å­˜å±æ•…éšœæ˜¯åœ¨è¯»å†™æ“ä½œçš„å‰åå„æ·»åŠ ä¸€ä¸ª StoreStoreå±éšœï¼Œä¹Ÿå°±æ˜¯å››ä¸ªä½ç½®ï¼Œæ¥ä¿è¯é‡æ’åºæ—¶ä¸èƒ½æŠŠå†…å­˜å±éšœåé¢çš„æŒ‡ä»¤é‡æ’åºåˆ°å†…å­˜å±éšœä¹‹å‰çš„ä½ç½®ã€‚")]),s._v(" "),a("li",[s._v("å¦å¤– volatile å¹¶ä¸èƒ½è§£å†³åŸå­æ€§ï¼Œå¦‚æœéœ€è¦è§£å†³åŸå­æ€§é—®é¢˜ï¼Œéœ€è¦ä½¿ç”¨ synchronzied æˆ–è€… lockï¼Œè¿™éƒ¨åˆ†å†…å®¹åœ¨æˆ‘ä»¬åç»­ç« èŠ‚ä¸­ä»‹ç»ã€‚")])])])}),[],!1,null,null,null);a.default=e.exports}}]);